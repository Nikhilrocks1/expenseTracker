<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <form id="form">
    <label for="username">UserName:</label>
   <input id="username" name="username" type="text" required><br>
   <label for="email">Email:</label>
   <input id="email" name="email" type="email" required><br>
   <label for="phone">PhoneNumber:</label>
   <input id="phone" type="tel" required><br>
   <button type="submit">Submit</button>
  </form>
  <ul id="listOfUsers"></ul>
  <script>
    let form=document.getElementById("form");
    form.addEventListener("submit",submitDetails);
      
   function submitDetails(e){
    e.preventDefault();
   let name= e.target.username.value;
     let email= e.target.email.value;
    let phone= e.target.phone.value;
    let obj={
     name,
     email,
     phone
    }
      localStorage.setItem(obj.email,JSON.stringify(obj));
     
      showNewUserOnScreen(obj);
    }
    /*  window.addEventListener("DOMContentLoaded",() => {
        const localStorageObj=localStorage;
        const localStoragekeys=Object.keys(localStorageObj);
      
        for(let i=0;i<localStoragekeys.length;i++){
          const key = localStoragekeys[i];
        
          const userDetailsString=localStorageObj[key];
        
          const userDetailsObj=JSON.parse(userDetailsString);
        
          showNewUserOnScreen(userDetailsObj);
        }
      }) ; */

       function showNewUserOnScreen(user){
           const parentNode=document.getElementById('listOfUsers');
           const childHTML=`<li id=${user.email}>${user.name} ${user.email} 
            <button onclick=deleteUser('${user.email}') >delete</button>
            <button onclick=editUser('${user.email}','${user.name}','${user.phone}') >edit</button> </li>`;
           parentNode.innerHTML=parentNode.innerHTML+childHTML;
       }

       function deleteUser(email){
        localStorage.removeItem(email);
        removeItemFromScreen(email);
       }

       function removeItemFromScreen(email){
       const parentNode=document.getElementById('listOfUsers');
       const childNodeToBeDeleted=document.getElementById(email);
         parentNode.removeChild(childNodeToBeDeleted);
       }

     function editUser(email,name,phone){
       document.getElementById("email").value=email;
       document.getElementById("username").value=name;
       document.getElementById("phone").value=phone;

       deleteUser(email);
     }
  </script>
</body>
</html>